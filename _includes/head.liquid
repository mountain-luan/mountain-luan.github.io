<!-- Metadata, OpenGraph and Schema.org -->
{% include metadata.liquid %}

<!-- Bootstrap & MDB -->
<link rel="stylesheet" href="{{ '/assets/css/bootstrap.min.css' | relative_url | bust_file_cache }}">
<link
  rel="stylesheet"
  href="{{ site.third_party_libraries.mdb.url.css }}"
  integrity="{{ site.third_party_libraries.mdb.integrity.css }}"
  crossorigin="anonymous"
>

<!-- Bootstrap Table -->
{% if page.pretty_table %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.bootstrap-table.url.css }}"
    integrity="{{ site.third_party_libraries.bootstrap-table.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

<!-- Fonts & Icons -->
<link defer rel="stylesheet" href="{{ '/assets/css/academicons.min.css' | relative_url | bust_file_cache }}">
<link
  defer
  rel="stylesheet"
  type="text/css"
  href="{{ site.third_party_libraries.google_fonts.url.fonts }}"
>

<!-- Code Syntax Highlighting -->
<link
  defer
  rel="stylesheet"
  href="{{ '/assets/css/jekyll-pygments-themes-github.css' | relative_url | bust_file_cache }}"
  media=""
  id="highlight_theme_light"
>

{% if page.toc and page.toc.sidebar %}
  <!-- Sidebar Table of Contents -->
  <link defer href="{{ '/assets/css/bootstrap-toc.min.css' | relative_url | bust_file_cache }}" rel="stylesheet">
{% endif %}

<!-- Styles -->

<!-- pseudocode -->
{% if page.pseudocode %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.pseudocode.url.css }}"
    integrity="{{ site.third_party_libraries.pseudocode.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

{% if site.icon.size <= 4 %}
  <link
    rel="shortcut icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>{{ site.icon }}</text></svg>"
  >
{% elsif site.icon != blank %}
  <link rel="shortcut icon" href="{{ site.icon | prepend: '/assets/img/' | relative_url | bust_file_cache}}">
{% endif %}
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url | bust_css_cache }}">
<link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

<!-- Dark Mode -->
<script src="{{ '/assets/js/theme.js' | relative_url | bust_file_cache }}"></script>
{% if site.enable_darkmode %}
  <link
    defer
    rel="stylesheet"
    href="{{ '/assets/css/jekyll-pygments-themes-native.css' | relative_url | bust_file_cache }}"
    media="none"
    id="highlight_theme_dark"
  >
  <script>
    initTheme();
  </script>
{% endif %}

<!-- GeoJSON support via Leaflet -->
{% if page.map %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.leaflet.url.css }}"
    integrity="{{ site.third_party_libraries.leaflet.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

<!-- diff2html -->
{% if page.code_diff %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.highlightjs.url.css.light }}"
    integrity="{{ site.third_party_libraries.highlightjs.integrity.css.light }}"
    crossorigin="anonymous"
    media="screen and (prefers-color-scheme: light)"
  >
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.highlightjs.url.css.dark }}"
    integrity="{{ site.third_party_libraries.highlightjs.integrity.css.dark }}"
    crossorigin="anonymous"
    media="screen and (prefers-color-scheme: dark)"
  >
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.diff2html.url.css }}"
    integrity="{{ site.third_party_libraries.diff2html.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

{% if page.images %}
  <!-- Image comparison slider -->
  {% if page.images.compare %}
    <link
      defer
      rel="stylesheet"
      href="{{ site.third_party_libraries.img-comparison-slider.url.css }}"
      integrity="{{ site.third_party_libraries.img-comparison-slider.integrity.css }}"
      crossorigin="anonymous"
    >
  {% endif %}
  <!-- Image slider -->
  {% if page.images.slider %}
    <link
      defer
      rel="stylesheet"
      href="{{ site.third_party_libraries.swiper.url.css }}"
      integrity="{{ site.third_party_libraries.swiper.integrity.css }}"
      crossorigin="anonymous"
    >
  {% endif %}
{% endif %}

{% if page.tikzjax %}
  <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
{% endif %}

<style>
/* --- 1. 全局字体大换血：Georgia 学术风 --- */
  
  /* 覆盖所有可能的元素，确保没有漏网之鱼 */
  body, p, li, div, a, span, 
  table, td, th,                /* 重点修复：News 和 Awards 的表格内容 */
  h1, h2, h3, h4, h5, h6, 
  .post-title, .post-description {
    /* 核心修改：使用 Georgia 作为首选，Times New Roman 备选 */
    font-family: Georgia, "Times New Roman", Times, serif !important;
    
    /* 颜色微调：衬线体通常用纯黑或深灰才好看 */
    /* color: #333 !important; (可选：如果你觉得不够黑可以解开这行) */
  }

  /* 正文阅读体验优化 */
  body, p, li, td {
    font-size: 17px !important;   /* 字号：17px (比默认大一点，Georgia这个大小很舒服) */
    line-height: 1.6 !important;  /* 行高：稍微紧凑一点，符合传统论文排版 */
    font-weight: normal !important; /* 恢复标准粗细，Georgia 自带粗细就很合适 */
  }

  /* 标题稍微加粗 */
  h1, h2, h3, h4, .post-title {
    font-weight: 600 !important;
  }
  
  /* 针对 News 列表日期的微调 */
  .news table td {
    font-size: 16px !important; /* 日期可以稍微小一号 */
  }


  /* --- 2. 导航栏对齐修复 (Vertical Alignment Fix) --- */
  
  /* 强制导航栏容器使用 Flex 布局，实现垂直居中 */
  .navbar .container {
    display: flex !important;
    align-items: center !important; /* 关键：垂直居中 */
  }
  
  /* 修正名字 (Yangyang Luan) 的行高 */
  .navbar-brand {
    display: flex !important;
    align-items: center !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    height: 50px; /* 强制高度，配合 flex 实现居中 */
  }

  /* 修正右侧导航链接和图标 */
  .navbar-nav {
    display: flex !important;
    align-items: center !important;
    flex-direction: row !important;
  }
  
  .navbar-nav li {
    display: flex !important;
    align-items: center !important;
  }
  
  /* 特别修正：开关灯按钮 */
  button#light-toggle {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 10px !important;
    margin: 0 !important;
    height: auto !important;
  }

  /* --- 1. 顶部间距极限压缩 (Extreme Spacing Reduction) --- */
  
  /* Body 预留高度：只留出导航栏的物理高度，一点不多留 */
  body {
    padding-top: 56px !important; /* 移动端导航栏标准高度 */
  }
  @media (min-width: 768px) {
    body {
      padding-top: 60px !important; /* 电脑端导航栏高度，设为紧凑值 */
    }
  }

  /* 核心：清除容器和标题的所有上方边距 */
  .container, 
  div.post, 
  .post-header {
    padding-top: 0px !important;
    margin-top: 0px !important;
  }
  
  /* 调整标题的位置 */
  .post-title {
    margin-top: 15px !important; /* 距离导航栏底部的距离，这里设为 10px，非常紧凑 */
    margin-bottom: 5px !important; /* 名字和下方副标题的距离 */
  }
  
  /* 调整副标题 (Subtitle) 的位置 */
  .post-description, .desc {
    margin-bottom: 20px !important; /* 副标题和正文的距离 */
  }


  /* --- 2. 移动端布局 (左对齐 + 缩小) --- */
  @media (max-width: 768px) {
    .profile {
      width: 100% !important;
      float: none !important;
      display: block !important;
      margin-bottom: 15px !important;
    }
    
    .profile img {
      width: 150px !important; 
      max-width: 150px !important;
      margin: 0 !important;    /* 靠左 */
      display: block;
    }
    
    .profile .more-info div {
       justify-content: flex-start !important;
       padding-left: 2px !important;
    }
  }


  /* --- 3. 电脑端布局 (防止位移) --- */
  @media (min-width: 769px) {
    .profile {
      width: 20% !important;
      max-width: 250px;
      margin-right: 30px;
      float: left !important;
    }
  }


  /* --- 4. 暗色模式配色优化 (Smart Dark Mode) --- */
  
  /* 通用链接：静谧蓝 */
  [data-theme="dark"] a {
    color: #58a6ff !important; 
    text-decoration: none;
  }
  [data-theme="dark"] a:hover {
    color: #79c0ff !important;
    text-decoration: underline;
  }

  /* 【修复】News 标题保持原色 */
  /* 规则：如果是 H1, H2, H3 里的链接，不要变蓝，跟随标题颜色 */
  [data-theme="dark"] h1 a,
  [data-theme="dark"] h2 a,
  [data-theme="dark"] h3 a {
    color: inherit !important; 
    text-decoration: none !important;
  }

  /* 保护导航栏和图标 */
  [data-theme="dark"] .navbar a,
  [data-theme="dark"] .profile .more-info a {
    color: inherit !important;
  }


  /* --- 5. 滚动条稳定 --- */
  html {
    overflow-y: scroll;
  }
</style>
