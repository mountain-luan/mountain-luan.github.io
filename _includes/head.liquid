<!-- Metadata, OpenGraph and Schema.org -->
{% include metadata.liquid %}

<!-- Bootstrap & MDB -->
<link rel="stylesheet" href="{{ '/assets/css/bootstrap.min.css' | relative_url | bust_file_cache }}">
<link
  rel="stylesheet"
  href="{{ site.third_party_libraries.mdb.url.css }}"
  integrity="{{ site.third_party_libraries.mdb.integrity.css }}"
  crossorigin="anonymous"
>

<!-- Bootstrap Table -->
{% if page.pretty_table %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.bootstrap-table.url.css }}"
    integrity="{{ site.third_party_libraries.bootstrap-table.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

<!-- Fonts & Icons -->
<link defer rel="stylesheet" href="{{ '/assets/css/academicons.min.css' | relative_url | bust_file_cache }}">
<link
  defer
  rel="stylesheet"
  type="text/css"
  href="{{ site.third_party_libraries.google_fonts.url.fonts }}"
>

<!-- Code Syntax Highlighting -->
<link
  defer
  rel="stylesheet"
  href="{{ '/assets/css/jekyll-pygments-themes-github.css' | relative_url | bust_file_cache }}"
  media=""
  id="highlight_theme_light"
>

{% if page.toc and page.toc.sidebar %}
  <!-- Sidebar Table of Contents -->
  <link defer href="{{ '/assets/css/bootstrap-toc.min.css' | relative_url | bust_file_cache }}" rel="stylesheet">
{% endif %}

<!-- Styles -->

<!-- pseudocode -->
{% if page.pseudocode %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.pseudocode.url.css }}"
    integrity="{{ site.third_party_libraries.pseudocode.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

{% if site.icon.size <= 4 %}
  <link
    rel="shortcut icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>{{ site.icon }}</text></svg>"
  >
{% elsif site.icon != blank %}
  <link rel="shortcut icon" href="{{ site.icon | prepend: '/assets/img/' | relative_url | bust_file_cache}}">
{% endif %}
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url | bust_css_cache }}">
<link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

<!-- Dark Mode -->
<script src="{{ '/assets/js/theme.js' | relative_url | bust_file_cache }}"></script>
{% if site.enable_darkmode %}
  <link
    defer
    rel="stylesheet"
    href="{{ '/assets/css/jekyll-pygments-themes-native.css' | relative_url | bust_file_cache }}"
    media="none"
    id="highlight_theme_dark"
  >
  <script>
    initTheme();
  </script>
{% endif %}

<!-- GeoJSON support via Leaflet -->
{% if page.map %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.leaflet.url.css }}"
    integrity="{{ site.third_party_libraries.leaflet.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

<!-- diff2html -->
{% if page.code_diff %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.highlightjs.url.css.light }}"
    integrity="{{ site.third_party_libraries.highlightjs.integrity.css.light }}"
    crossorigin="anonymous"
    media="screen and (prefers-color-scheme: light)"
  >
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.highlightjs.url.css.dark }}"
    integrity="{{ site.third_party_libraries.highlightjs.integrity.css.dark }}"
    crossorigin="anonymous"
    media="screen and (prefers-color-scheme: dark)"
  >
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.diff2html.url.css }}"
    integrity="{{ site.third_party_libraries.diff2html.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

{% if page.images %}
  <!-- Image comparison slider -->
  {% if page.images.compare %}
    <link
      defer
      rel="stylesheet"
      href="{{ site.third_party_libraries.img-comparison-slider.url.css }}"
      integrity="{{ site.third_party_libraries.img-comparison-slider.integrity.css }}"
      crossorigin="anonymous"
    >
  {% endif %}
  <!-- Image slider -->
  {% if page.images.slider %}
    <link
      defer
      rel="stylesheet"
      href="{{ site.third_party_libraries.swiper.url.css }}"
      integrity="{{ site.third_party_libraries.swiper.integrity.css }}"
      crossorigin="anonymous"
    >
  {% endif %}
{% endif %}

{% if page.tikzjax %}
  <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
{% endif %}

<style>
  /* --- 1. 全局字体与排版 (Georgia Core) --- */
  
  /* 核心字体栈 */
  body, p, li, div, a, span, 
  table, td, th, tr, tbody, thead, /* 穷举表格元素，确保 News 无死角 */
  h1, h2, h3, h4, h5, h6, 
  .post-title, .post-description, .navbar-brand {
    font-family: Georgia, "Times New Roman", Times, serif !important;
  }

  /* 正文样式 */
  body, p, li, td, th {
    font-size: 17px !important;    /* 统一字号 */
    line-height: 1.6 !important;   /* 舒适行高 */
    font-weight: 400 !important;   /* 标准粗细，不要加粗 */
  }

  /* 标题样式 - 减重版 */
  /* Georgia 字体本身很有分量，不需要 600/700 的粗度，normal 400 足以 */
  h1, h2, h3, .post-title {
    font-weight: normal !important; /* 关键修改：去肥增瘦 */
    color: #000000 !important;      /* 纯黑标题，增加质感 */
  }
  
  /* 导航栏左上角名字 (Navbar Brand) */
  .navbar-brand {
    font-weight: normal !important; /* 这里的名字也不要太粗 */
    font-size: 20px !important;     /* 稍微大一点点 */
  }


  /* --- 2. News 列表完美统一 --- */
  
  .news table td, .news table th {
    font-size: 17px !important;    /* 强制日期和内容一样大 */
    font-family: Georgia, "Times New Roman", Times, serif !important;
    vertical-align: top !important; /* 顶部对齐，更整齐 */
    padding-bottom: 10px !important; /* 增加一点行间距 */
  }
  
  /* 修复可能的日期颜色过浅问题 */
  .news table td:first-child {
    color: inherit !important;     /* 保持颜色一致，或者你可以设为 #333 */
    font-weight: normal !important;
    padding-right: 20px !important; /* 日期和内容的间距 */
  }


  /* --- 3. 导航栏绝对垂直居中 (Vertical Align) --- */
  
  /* 容器 Flex 化 */
  .navbar .container {
    display: flex !important;
    align-items: center !important;
    height: 60px !important; /* 锁定导航栏高度 */
  }

  /* 链接区域 */
  .navbar-nav {
    display: flex !important;
    align-items: center !important;
    height: 100% !important;
  }

  /* 单个链接 */
  .navbar-nav li.nav-item {
    display: flex !important;
    align-items: center !important;
    height: 100% !important;
  }
  
  /* 链接文字 */
  .navbar-nav li.nav-item a {
    display: flex !important;
    align-items: center !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    height: 100% !important;
  }

  /* 【关键】修复开关灯按钮位置 */
  button#light-toggle {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 0 0 10px !important; /* 左侧留点距离 */
    padding: 0 !important;
    height: 30px !important; /* 给按钮固定高度 */
    width: 30px !important;
    position: relative !important;
    top: 0px !important; /* 微调：如果还觉得歪，改这个数值，支持负数 */
  }
  
  /* 修正图标本身的位置 */
  button#light-toggle i {
    position: relative !important;
    top: -1px !important; /* 有时候图标字体的基线偏下，往上提1px */
  }


  /* --- 4. 页面标题位置固定 (Anchor Locking) --- */
  
  /* 统一所有页面的顶部间距策略 */
  body {
    padding-top: 65px !important; /* 留出导航栏高度 */
  }

  /* 核心布局锁定：所有页面的 H1 标题位置完全一致 */
  .post-header, .post-content {
    margin-top: 0px !important;
    padding-top: 20px !important; /* 使用 padding 撑开，而不是 margin */
  }
  
  /* Home页、Pubs页、About页 的 H1 标题 */
  .post-title, 
  h1.post-title,
  header.post-header h1 {
    margin-top: 0px !important;
    margin-bottom: 10px !important;
    line-height: 1.2 !important;
    /* 确保不论在哪个页面，它都从容器顶部相同位置开始 */
  }
  
  /* 修复 Home 页面可能的 Profile 干扰 */
  .post {
    clear: both !important; /* 清除浮动干扰 */
  }


  /* --- 5. 移动端布局 (保持不变) --- */
  @media (max-width: 768px) {
    .profile {
      width: 100% !important;
      float: none !important;
      display: block !important;
      margin-bottom: 15px !important;
    }
    .profile img {
      width: 130px !important; 
      max-width: 130px !important;
      margin: 0 !important;
      display: block;
    }
    .profile .more-info div {
       justify-content: flex-start !important;
       padding-left: 2px !important;
    }
    /* 移动端标题稍微小一点，避免换行太丑 */
    .post-title {
      font-size: 28px !important;
    }
  }

  /* --- 6. 电脑端图片 (保持不变) --- */
  @media (min-width: 769px) {
    .profile {
      width: 23% !important; /* 稍微宽一点点，适应 Georgia */
      max-width: 250px;
      margin-right: 35px;
      float: left !important;
    }
  }

  /* --- 7. 配色 (保持不变) --- */
  [data-theme="dark"] a { color: #58a6ff !important; text-decoration: none; }
  [data-theme="dark"] a:hover { color: #79c0ff !important; text-decoration: underline; }
  [data-theme="dark"] h1 a, [data-theme="dark"] h2 a, [data-theme="dark"] h3 a,
  [data-theme="dark"] .navbar a, [data-theme="dark"] .profile .more-info a {
    color: inherit !important; text-decoration: none !important;
  }
  html { overflow-y: scroll; }
</style>
