<!-- Metadata, OpenGraph and Schema.org -->
{% include metadata.liquid %}

<!-- Bootstrap & MDB -->
<link rel="stylesheet" href="{{ '/assets/css/bootstrap.min.css' | relative_url | bust_file_cache }}">
<link
  rel="stylesheet"
  href="{{ site.third_party_libraries.mdb.url.css }}"
  integrity="{{ site.third_party_libraries.mdb.integrity.css }}"
  crossorigin="anonymous"
>

<!-- Bootstrap Table -->
{% if page.pretty_table %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.bootstrap-table.url.css }}"
    integrity="{{ site.third_party_libraries.bootstrap-table.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

<!-- Fonts & Icons -->
<link defer rel="stylesheet" href="{{ '/assets/css/academicons.min.css' | relative_url | bust_file_cache }}">
<link
  defer
  rel="stylesheet"
  type="text/css"
  href="{{ site.third_party_libraries.google_fonts.url.fonts }}"
>

<!-- Code Syntax Highlighting -->
<link
  defer
  rel="stylesheet"
  href="{{ '/assets/css/jekyll-pygments-themes-github.css' | relative_url | bust_file_cache }}"
  media=""
  id="highlight_theme_light"
>

{% if page.toc and page.toc.sidebar %}
  <!-- Sidebar Table of Contents -->
  <link defer href="{{ '/assets/css/bootstrap-toc.min.css' | relative_url | bust_file_cache }}" rel="stylesheet">
{% endif %}

<!-- Styles -->

<!-- pseudocode -->
{% if page.pseudocode %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.pseudocode.url.css }}"
    integrity="{{ site.third_party_libraries.pseudocode.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

{% if site.icon.size <= 4 %}
  <link
    rel="shortcut icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>{{ site.icon }}</text></svg>"
  >
{% elsif site.icon != blank %}
  <link rel="shortcut icon" href="{{ site.icon | prepend: '/assets/img/' | relative_url | bust_file_cache}}">
{% endif %}
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url | bust_css_cache }}">
<link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

<!-- Dark Mode -->
<script src="{{ '/assets/js/theme.js' | relative_url | bust_file_cache }}"></script>
{% if site.enable_darkmode %}
  <link
    defer
    rel="stylesheet"
    href="{{ '/assets/css/jekyll-pygments-themes-native.css' | relative_url | bust_file_cache }}"
    media="none"
    id="highlight_theme_dark"
  >
  <script>
    initTheme();
  </script>
{% endif %}

<!-- GeoJSON support via Leaflet -->
{% if page.map %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.leaflet.url.css }}"
    integrity="{{ site.third_party_libraries.leaflet.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

<!-- diff2html -->
{% if page.code_diff %}
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.highlightjs.url.css.light }}"
    integrity="{{ site.third_party_libraries.highlightjs.integrity.css.light }}"
    crossorigin="anonymous"
    media="screen and (prefers-color-scheme: light)"
  >
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.highlightjs.url.css.dark }}"
    integrity="{{ site.third_party_libraries.highlightjs.integrity.css.dark }}"
    crossorigin="anonymous"
    media="screen and (prefers-color-scheme: dark)"
  >
  <link
    defer
    rel="stylesheet"
    href="{{ site.third_party_libraries.diff2html.url.css }}"
    integrity="{{ site.third_party_libraries.diff2html.integrity.css }}"
    crossorigin="anonymous"
  >
{% endif %}

{% if page.images %}
  <!-- Image comparison slider -->
  {% if page.images.compare %}
    <link
      defer
      rel="stylesheet"
      href="{{ site.third_party_libraries.img-comparison-slider.url.css }}"
      integrity="{{ site.third_party_libraries.img-comparison-slider.integrity.css }}"
      crossorigin="anonymous"
    >
  {% endif %}
  <!-- Image slider -->
  {% if page.images.slider %}
    <link
      defer
      rel="stylesheet"
      href="{{ site.third_party_libraries.swiper.url.css }}"
      integrity="{{ site.third_party_libraries.swiper.integrity.css }}"
      crossorigin="anonymous"
    >
  {% endif %}
{% endif %}

{% if page.tikzjax %}
  <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
{% endif %}


<style>
  /* =======================================================
     【V18.0 字体极限优化 & 导航栏适配版】
     1. 字体粗细：Yangyang 强制设为 300 (字库最细档位)
     2. 视觉欺骗：稍微降低不透明度，让字体看起来更“轻”
     3. 导航栏：适配新增的 CV 链接样式
     ======================================================= */

  /* --- PART A: 字体粗细控制 (Font Weight) --- */
  
  /* 1. 全局基准：强制标准粗细 (400) */
  body, p, li, div, td, th, span, a, .desc, .award, .periodical {
    font-weight: 400 !important; 
  }

  /* 2. 大标题 (H1) -> 保持细体 (300) */
  h1, .post-title, .navbar-brand {
    font-weight: 300 !important; 
  }
  
  /* 3. 小标题 (H2-H6) -> 保持标准 (400) */
  h2, h3, h4, h5, h6 {
    font-weight: 400 !important; 
  }

  /* 4. 名字 "Yangyang" 极限变细处理 */
  /* 字库里没有 200，所以设为 300 是极限。*/
  /* 为了让它看起来和 Luan 稍有不同但又不过分粗，我们可以试试 400，或者 300 */
  /* 如果你想要 Yangyang 比 Luan (300) 稍微粗一点点，只能选 400 */
  /* 如果你想要 Yangyang 和 Luan 一样细，就选 300 */
  
  .post-title strong, 
  .post-title b, 
  .navbar-brand b,
  .navbar-brand strong {
    font-weight: 400 !important; /* 这里建议 400，因为 300 就和 Luan 完全一样了，没有层次 */
    /* opacity: 0.9; (如果你觉得太黑，可以解开这行注释) */
  }


  /* --- PART B: 颜色控制 (Color) --- */

  /* 1. 亮色模式 */
  body, p, li, .desc { color: #333333; }
  h1, h2, h3, h4, h5, h6, .post-title, .navbar-brand { color: #222222; }
  
  /* 导航栏链接 (包括新加的 CV) */
  .navbar-nav .nav-item .nav-link {
    font-size: 1rem !important; 
    color: #333333; 
  }


  /* --- PART C: News 列表修复 --- */
  .news table td, .news table th {
    font-size: 1rem !important;      
    vertical-align: top !important;
  }
  .news table td:first-child {
    min-width: 120px !important; 
    padding-right: 20px !important;
  }


  /* --- PART D: 暗色模式 (Dark Mode) --- */
  
  /* 1. 基础文字变白 */
  [data-theme="dark"] body,
  [data-theme="dark"] p,
  [data-theme="dark"] li,
  [data-theme="dark"] .desc,
  [data-theme="dark"] div, 
  [data-theme="dark"] td {  
    color: #e0e0e0 !important;
  }

  /* 2. 标题变纯白 */
  [data-theme="dark"] h1, 
  [data-theme="dark"] h2, 
  [data-theme="dark"] h3, 
  [data-theme="dark"] h4, 
  [data-theme="dark"] h5, 
  [data-theme="dark"] h6, 
  [data-theme="dark"] .post-title,
  [data-theme="dark"] .navbar-brand {
    color: #ffffff !important;
  }
  
  /* 3. 导航栏变白 (CV 链接也会自动变白) */
  [data-theme="dark"] .navbar-nav .nav-item .nav-link {
    color: #e0e0e0 !important; 
  }
  
  /* 4. 链接颜色 (静谧蓝) */
  [data-theme="dark"] a { color: #58a6ff !important; text-decoration: none; }
  [data-theme="dark"] a:hover { color: #79c0ff !important; text-decoration: underline; }

  /* 5. 颜色保护区 */
  [data-theme="dark"] .periodical, 
  [data-theme="dark"] .abbr,
  [data-theme="dark"] span.date { color: #a0a0a0 !important; }
  [data-theme="dark"] .award { color: inherit !important; }


  /* --- PART E: 布局优化 --- */
  body { padding-top: 56px !important; }
  @media (min-width: 768px) { body { padding-top: 60px !important; } }
  .container, div.post, .post-header { padding-top: 0px !important; margin-top: 0px !important; }
  .post-title { margin-top: 15px !important; margin-bottom: 5px !important; }
  .post-description, .desc { margin-bottom: 20px !important; }
  
  @media (max-width: 768px) {
    .profile { width: 100% !important; float: none !important; display: block !important; margin-bottom: 15px !important; }
    .profile img { width: 150px !important; max-width: 150px !important; margin: 0 !important; display: block; }
    .profile .more-info div { justify-content: flex-start !important; padding-left: 2px !important; }
  }
  @media (min-width: 769px) {
    .profile { width: 20% !important; max-width: 250px; margin-right: 30px; float: left !important; }
  }
  html { overflow-y: scroll; }
</style>
