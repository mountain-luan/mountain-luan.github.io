---
---
{% assign ob = "{" %}
{% assign cb = "}" %}

<div class="row" style="margin-bottom: 25px;">
  <div id="{{ entry.key }}" class="col-sm-12" style="border-left: 3px solid var(--global-theme-color); padding-left: 20px; margin-left: 5px;">
    
    <div class="title" style="font-weight: 600; font-size: 1.05rem; line-height: 1.4; margin-bottom: 4px;">
      {{ entry.title }}
    </div>
    
    <div class="author" style="font-size: 0.95rem; margin-bottom: 2px;">
      {% assign author_array_size = entry.author_array | size %}
      {%- for author in entry.author_array -%}
        {% assign author_is_self = false %}
        {%- assign author_last_name = author.last | regex_replace: '[*∗†‡§¶‖&^]', '' -%}
        {% if site.scholar.last_name contains author_last_name and site.scholar.first_name contains author.first %}
          {% assign author_is_self = true %}
        {% endif %}
        
        {%- if forloop.length > 1 -%}
          {% if forloop.first == false %}, {% endif %}
          {% if forloop.last %}and {% endif %}
        {% endif %}

        {%- if author_is_self -%}
          <em>{{ author.first }} {{ author.last }}</em>
        {%- else -%}
          {{ author.first }} {{ author.last }}
        {%- endif -%}
      {% endfor %}
    </div>

    {% assign month_full = entry.month %}
    {% if entry.month %}
      {% assign m_down = entry.month | downcase %}
      {% case m_down %}
        {% when 'jan' %}{% assign month_full = 'January' %}
        {% when 'feb' %}{% assign month_full = 'February' %}
        {% when 'mar' %}{% assign month_full = 'March' %}
        {% when 'apr' %}{% assign month_full = 'April' %}
        {% when 'may' %}{% assign month_full = 'May' %}
        {% when 'jun' %}{% assign month_full = 'June' %}
        {% when 'jul' %}{% assign month_full = 'July' %}
        {% when 'aug' %}{% assign month_full = 'August' %}
        {% when 'sep' %}{% assign month_full = 'September' %}
        {% when 'oct' %}{% assign month_full = 'October' %}
        {% when 'nov' %}{% assign month_full = 'November' %}
        {% when 'dec' %}{% assign month_full = 'December' %}
      {% endcase %}
    {% endif %}

    <div class="periodical" style="font-size: 0.95rem; color: var(--global-text-color-light);">
      <em>{{ entry.journal }}{{ entry.booktitle }}</em>{% if entry.volume %}, vol. {{ entry.volume }}{% endif %}{% if entry.pages %}, pp. {{ entry.pages }}{% endif %}{% if entry.year %}, {{ month_full }} {{ entry.year }}{% endif %}{% if entry.note %}, {{ entry.note }}{% endif %}
    </div>

    {% if entry.award %}
      <div style="font-size: 0.9rem; color: #d32f2f; margin-top: 2px;">
        <i class="fa-solid fa-trophy" style="margin-right: 5px;"></i>{{ entry.award }}
      </div>
    {% endif %}

    <div class="links" style="margin-top: 5px;">
      {% if entry.pdf %}
        {% if entry.pdf contains '://' %}
          <a href="{{ entry.pdf }}" class="btn btn-sm z-depth-0" role="button" target="_blank" style="border: 1px solid #ddd; padding: 2px 8px;">PDF</a>
        {% else %}
          <a href="{{ entry.pdf | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button" target="_blank" style="border: 1px solid #ddd; padding: 2px 8px;">PDF</a>
        {% endif %}
      {% endif %}

      {% if entry.bibtex_show %}
        <a class="bibtex btn btn-sm z-depth-0" role="button" style="border: 1px solid #ddd; padding: 2px 8px;">Cite</a>
      {% endif %}

      {% if entry.html %}
        <a href="{{ entry.html }}" class="btn btn-sm z-depth-0" role="button" style="border: 1px solid #ddd; padding: 2px 8px;">HTML</a>
      {% endif %}

      {% if entry.abstract %}<a class="abstract btn btn-sm z-depth-0" role="button" style="border: 1px solid #ddd; padding: 2px 8px;">Abs</a>{% endif %}
      {% if entry.supp %}<a href="{{ entry.supp | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button" style="border: 1px solid #ddd; padding: 2px 8px;">Supp</a>{% endif %}
      {% if entry.code %}<a href="{{ entry.code }}" class="btn btn-sm z-depth-0" role="button" style="border: 1px solid #ddd; padding: 2px 8px;">Code</a>{% endif %}
    </div>

    {% if entry.bibtex_show %}
      {% capture entry_bibtex %}@{{ entry.type }}{{ ob }}{{ entry.key }},
  title = {{ ob }}{{ entry.title }}{{ cb }},
  author = {{ ob }}{% for author in entry.author_array %}{% assign clean_last = author.last | remove: "*" %}{{ clean_last }}, {{ author.first }}{% unless forloop.last %} and {% endunless %}{% endfor %}{{ cb }}{% if entry.journal %},
  journal = {{ ob }}{{ entry.journal }}{{ cb }}{% endif %}{% if entry.booktitle %},
  booktitle = {{ ob }}{{ entry.booktitle }}{{ cb }}{% endif %}{% if entry.volume %},
  volume = {{ ob }}{{ entry.volume }}{{ cb }}{% endif %}{% if entry.number %},
  number = {{ ob }}{{ entry.number }}{{ cb }}{% endif %}{% if entry.pages %},
  pages = {{ ob }}{{ entry.pages }}{{ cb }}{% endif %}{% if entry.year %},
  year = {{ ob }}{{ entry.year }}{{ cb }}{% endif %}{% if entry.month %},
  month = {{ ob }}{{ month_full }}{{ cb }}{% endif %}{% if entry.doi %},
  doi = {{ ob }}{{ entry.doi }}{{ cb }}{% endif %}
}
{% endcapture %}
      
      <div class="bibtex hidden">
        {% highlight bibtex %}{{ entry_bibtex }}{% endhighlight %}
      </div>
    {% endif %}

    {% if entry.abstract %}
      <div class="abstract hidden">
        <p>{{ entry.abstract }}</p>
      </div>
    {% endif %}

  </div>
</div>
